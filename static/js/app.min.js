"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function getClassName(t){return t.replace(".","")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),Countdown=function(){function t(e){_classCallCheck(this,t),this.today=new Date;var a=new Date(e.endDate);if(isNaN(a.getTime()))throw Error("Invalid target date: "+e.endDate);if(a<=this.today)throw Error("Must be a future date: "+e.endDate);if(this.endDate=a,e.startDate){var n=new Date(e.startDate);if(isNaN(a.getTime()))throw Error("Invalid start date: "+e.startDate);if(n>=this.today)throw Error("Must be a past date: "+e.startDate);this.startDate=n}else this.startDate=new Date(a.getFullYear(),0,1)}return _createClass(t,[{key:"getNoOfWeekendsBetween",value:function(t,e){t.setHours(0,0,0),e.setHours(23,59,59);var a=6-t.getDay(),n=e.getDay()+1;n>6&&(n=0);var r=(e-t)/864e5;return Math.round((r-a-n)/7)}},{key:"getGraphHtml",value:function(){for(var t="",e=this.startDate.getFullYear();e<=this.endDate.getFullYear();e++)for(var a=0;a<12;a++)if(!(e===this.startDate.getFullYear()&&a<this.startDate.getMonth())){if(e===this.endDate.getFullYear()&&a>this.endDate.getMonth())break;var n=this.getMonthLabel(a);this.startDate.getFullYear()!==this.endDate.getFullYear()&&(n+=" "+e),t+='<ul class="graph__month" title="'+n+'">';var r=new Date(e,a,1),s=new Date(e,a+1,0),o=this.getNoOfWeekendsBetween(r,s),i=o,l=e<this.today.getFullYear(),u=e<=this.today.getFullYear()&&a<this.today.getMonth(),c=e===this.today.getFullYear()&&a===this.today.getMonth(),h=!1,d={weekElapsed:"graph__week--elapsed",week:"graph__week",weekCurrent:"graph__week--current"};a===this.today.getMonth()&&(i=this.getNoOfWeekendsBetween(r,this.today));for(var f=0;f<=o;f++){var y="";(l||u)&&(y=d.weekElapsed),c&&(f<=i?y=d.weekElapsed:h||(y=d.weekCurrent,h=!0)),t+='<li class="'+d.week+" "+y+'"></li>'}t+="</ul>"}return t}},{key:"getMonthLabel",value:function(t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t]}},{key:"getSummary",value:function(){return{totalWeekends:this.getNoOfWeekendsBetween(this.startDate,this.endDate),remainingWeekends:this.getNoOfWeekendsBetween(this.today,this.endDate),endDate:this.formatDate(this.endDate)}}},{key:"formatDate",value:function(t){return t.getDate()+" "+this.getMonthLabel(t.getMonth())+" "+t.getFullYear()}}]),t}();void 0===Countdown||_typeof(Countdown);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),Tabs=function(){function t(e,a){_classCallCheck(this,t),this.cssSelectors={tabList:".tab-list",tabItem:".tab-list__item",tabLink:".tab-list__link",barChartElapsed:".bar-chart__elapsed",summaryCount:".summary__count",summaryDate:".summary__date",graph:".graph"};var n=getClassName(this.cssSelectors.tabList);if(!e.hasClass(n))throw new Error('Expected an element with class "'+n+'"');this.$root=e,this.data=a,this.bindUIActions(),this.init()}return _createClass(t,[{key:"init",value:function(){var t="";for(var e in this.data){var a=this.data[e],n="";0===e&&(n="active"),t+='<li class="tab-list__item '+n+'">\n        <a class="tab-list__link" href="#'+this.generateAnchor(a.name)+'" data-start="'+a.startDate+'" data-end="'+a.endDate+'">'+a.name+"</a>\n      </li>"}this.$root.html(t),$(this.cssSelectors.tabLink).eq(0).click()}},{key:"bindUIActions",value:function(){$(this.cssSelectors.tabList).on("click",this.cssSelectors.tabLink,this.reloadCountdown.bind(this))}},{key:"generateAnchor",value:function(t){return encodeURIComponent(t.toLowerCase().replace(" ","-"))}},{key:"reloadCountdown",value:function(t){t.preventDefault();var e=$(t.currentTarget),a=new Countdown({startDate:e.data("start"),endDate:e.data("end")}),n=a.getSummary();$(this.cssSelectors.summaryCount).text(n.remainingWeekends),$(this.cssSelectors.summaryDate).text(n.endDate),$(this.cssSelectors.barChartElapsed).width(Math.round(100*(n.totalWeekends-n.remainingWeekends)/n.totalWeekends)+"%"),$(this.cssSelectors.graph).html(a.getGraphHtml()),e.parent(this.cssSelectors.tabItem).addClass("active").siblings().removeClass("active")}}]),t}();void 0===Tabs||_typeof(Tabs);